<template>
  <section class="blog-column-one-area ptb-100">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <div class="row">
            <div class="col-lg-12 col-md-6">
              <div class="single-blog-post">
                <div class="post-image">
                  <a href="#">
                    <img src="/assets/img/blog/blog-7.jpg" alt="image">
                  </a>
                </div>

                <div class="blog-content">
                  <div class="date">
                    <i class="bx bx-calendar"></i>
                    <span>06 October 2019</span>
                  </div>

                  <h3>
                    <a href="#">New Cargo Shipment Is Open On The Global Market</a>
                  </h3>

                  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam suscipit autem, ut odit quos nam
                    temporibus pariatur, quam harum nulla porro error id earum asperiores, placeat eaque beatae deleniti
                    dolores Lorem ipsum dolor sit amet consectetur adipisicing placeat</p>

                  <a href="blog-details.html" class="default-btn">
                    <span>Read More</span>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-lg-12 col-md-6">
              <div class="single-blog-post">
                <div class="post-image">
                  <a href="#">
                    <img src="/assets/img/blog/blog-8.jpg" alt="image">
                  </a>
                </div>

                <div class="blog-content">
                  <div class="date">
                    <i class="bx bx-calendar"></i>
                    <span>07 October 2019</span>
                  </div>

                  <h3>
                    <a href="#">Transportation Charged Has Removed Form This Months</a>
                  </h3>

                  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam suscipit autem, ut odit quos nam
                    temporibus pariatur, quam harum nulla porro error id earum asperiores, placeat eaque beatae deleniti
                    dolores Lorem ipsum dolor sit amet consectetur adipisicing placeat</p>

                  <a href="blog-details.html" class="default-btn">
                    <span>Read More</span>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-lg-12 col-md-6 offset-md-3 offset-lg-0">
              <div class="single-blog-post">
                <div class="post-image">
                  <a href="#">
                    <img src="/assets/img/blog/blog-9.jpg" alt="image">
                  </a>
                </div>

                <div class="blog-content">
                  <div class="date">
                    <i class="bx bx-calendar"></i>
                    <span>08 October 2019</span>
                  </div>

                  <h3>
                    <a href="#">Marketing Policy Added To The Logistic Service</a>
                  </h3>

                  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Veniam suscipit autem, ut odit quos nam
                    temporibus pariatur, quam harum nulla porro error id earum asperiores, placeat eaque beatae deleniti
                    dolores Lorem ipsum dolor sit amet consectetur adipisicing placeat</p>

                  <a href="blog-details.html" class="default-btn">
                    <span>Read More</span>
                  </a>
                </div>
              </div>
            </div>

            <div class="col-lg-12 col-md-12">
              <div class="pagination-area">
                <!--
										<a href="#" class="prev page-numbers">
										<i class="bx bx-chevron-left"></i>
									</a>
									-->

                <span class="page-numbers current" aria-current="page">1</span>
                <a href="#" class="page-numbers">2</a>
                <a href="#" class="page-numbers">3</a>

                <a href="#" class="next page-numbers">
                  <i class="bx bx-chevron-right"></i>
                </a>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="widget-sidebar">
            <div class="sidebar-widget search">
              <form class="search-form">
                <input class="form-control" name="search" placeholder="Search here" type="text">
                <button class="search-button" type="submit">
                  <i class="bx bx-search"></i>
                </button>
              </form>
            </div>

            <div class="sidebar-widget recent-post">
              <h3 class="widget-title">Recent Post</h3>

              <ul>
                <li>
                  <a href="blog-details.html">
                    New Cargo Shipment Is Open On The Global Market
                    <img src="/assets/img/blog-details/recent-post-1.jpg" alt="Image">
                  </a>
                  <span>October 19,2021</span>
                </li>
                <li>
                  <a href="blog-details.html">
                    Marketing Policy Added To The Logistic Service
                    <img src="/assets/img/blog-details/recent-post-2.jpg" alt="Image">
                  </a>
                  <span>October 18,2021</span>
                </li>
                <li>
                  <a href="blog-details.html">
                    Donâ€™t forget caybersecurity on your computer
                    <img src="/assets/img/blog-details/recent-post-3.jpg" alt="Image">
                  </a>
                  <span>October 09,2021</span>
                </li>
              </ul>
            </div>

            <div class="sidebar-widget categories">
              <h3>Categories</h3>

              <ul>
                <li>
                  <a href="#">Road Transport <span>(05)</span></a>
                </li>
                <li>
                  <a href="#">Sea Transport <span>(07)</span></a>
                </li>
                <li>
                  <a href="#">Air Transport <span>(10)</span></a>
                </li>
                <li>
                  <a href="#">Courier Service <span>(09)</span></a>
                </li>
                <li>
                  <a href="#">Fast Freight <span>(12)</span></a>
                </li>
                <li>
                  <a href="#">Home Delivery <span>(11)</span></a>
                </li>
                <li>
                  <a href="#">Packaging <span>(03)</span></a>
                </li>
              </ul>
            </div>

            <div class="sidebar-widget categories">
              <h3>Archives</h3>

              <ul>
                <li>
                  <a href="#">August <span>2021</span></a>
                </li>
                <li>
                  <a href="#">June <span>2021</span></a>
                </li>
                <li>
                  <a href="#">April <span>2021</span></a>
                </li>
                <li>
                  <a href="#">January <span>2021</span></a>
                </li>
                <li>
                  <a href="#">December <span>2021</span></a>
                </li>
                <li>
                  <a href="#">November <span>2021</span></a>
                </li>
              </ul>
            </div>

            <div class="sidebar-widget tags mb-0">
              <h3>Tags</h3>

              <ul>
                <li>
                  <a href="#">Road Transport</a>
                </li>
                <li>
                  <a href="#">Sea Transport</a>
                </li>
                <li>
                  <a href="#">Air Transport</a>
                </li>
                <li>
                  <a href="#">Courier Service</a>
                </li>
                <li>
                  <a href="#">Fast Freight</a>
                </li>
                <li>
                  <a href="#">Home Delivery</a>
                </li>
                <li>
                  <a href="#">Packaging</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<script>
import BiEye from '~icons/bi/eye';
import BiSuitHeart from '~icons/bi/suit-heart';
import { listProduct, listCategory } from "@/api/product";
import { getImgUrl } from '@/utils/getImgUrl';
import { BListGroup, BListGroupItem, BBadge, BCard, BOverlay } from 'bootstrap-vue-next';
import { sleep } from '@/utils/tools';

const categories = [

]

const products = []


export default {
  data() {
    return {
      getImgUrl,
      total: 0,
      category: -1,
      products: [],
      categories: [],
      params: {
        categoryIndex: [],
        pageNum: 1,
        pageSize: 10
      },
      loading: false
    }
  },
  components: {
    BiEye,
    BiSuitHeart,
    BListGroup,
    BListGroupItem,
    BBadge
  },
  mounted() {
    this.init()
  },
  methods: {
    init() {
      this.getProducts().then((a) => {
        this.getCategories()
      })
    },
    getProducts() {
      this.loading = true
      return sleep(500).then(() => {
        return listProduct(this.params).then(res => {
          this.products = res.rows
          this.setTotal(res.total)
          this.ex1Rows = res.total
          this.loading = false
        })
      })

    },
    getCategories() {
      listCategory().then(res => {
        this.categories = [{
          key: -1,
          text: 'All',
          value: -1,
          count: this.total
        }]
        res.rows.forEach(e => {
          this.categories.push(e)
        });
      })
    },
    changePagination(ev, page) {
      this.params.pageNum = page
      this.changeCategory()
    },
    changeCategory() {
      this.params.categoryIndex = []
      this.params.categoryIndex.push(this.category)
      this.getProducts()
    },
    clickCategory(v) {
      this.category = v.value
      this.changeCategory()
    },
    setTotal(v) {
      this.total = v
    }
  }
}
</script>

<style scoped>
.categories {
  height: 100%;
  float: left;
}

@media screen and (max-width: 990px) {
  .categories {
    display: none;
  }
}
</style>